<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manajemen Kamar</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

  <!-- Navbar -->
  <nav class="bg-blue-600 text-white p-4 shadow-lg">
    <div class="container mx-auto flex justify-between items-center">
      <h1 class="text-xl font-bold">Manajemen Kamar</h1>
      <ul class="flex space-x-4">
        <li><a href="index.html" class="hover:underline">Dashboard</a></li>
        <li><a href="rooms.html" class="hover:underline">Kamar</a></li>
        <li><a href="guests.html" class="hover:underline">Tamu</a></li>
        <li><a href="transactions.html" class="hover:underline">Transaksi</a></li>
        <li><a href="login.html" class="hover:underline">Login</a></li>
      </ul>
    </div>
  </nav>

    <!-- Manajemen Tamu -->
    <section id="guests" class="mb-12">
        <h2 class="text-2xl font-bold mb-4">Manajemen Tamu</h2>
        <div class="bg-white p-4 shadow rounded mb-4">
          <button id="add-guest-btn" class="bg-green-600 text-white p-2 rounded">Tambah Tamu</button>
        </div>
        <div class="bg-white p-4 shadow rounded">
          <table class="w-full border-collapse border">
            <thead class="bg-blue-600 text-white">
              <tr>
                <th class="border p-2">Nama</th>
                <th class="border p-2">Nomor Identitas</th>
                <th class="border p-2">Nomor Telepon</th>
                <th class="border p-2">Email</th>
                <th class="border p-2">Aksi</th>
              </tr>
            </thead>
            <tbody id="guest-list">
              <!-- Data tamu akan ditampilkan melalui script -->
            </tbody>
          </table>
        </div>
      </section>
  
      <!-- Modal Tambah Tamu -->
      <div id="add-guest-modal" class="fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white p-6 rounded shadow-lg w-1/3">
          <h3 class="text-xl font-bold mb-4">Tambah Tamu</h3>
          <form id="add-guest-form">
            <input type="text" id="guest-name" placeholder="Nama" class="p-2 border rounded mb-4 w-full" required>
            <input type="text" id="guest-id" placeholder="Nomor Identitas" class="p-2 border rounded mb-4 w-full" required>
            <input type="text" id="guest-phone" placeholder="Nomor Telepon" class="p-2 border rounded mb-4 w-full" required>
            <input type="email" id="guest-email" placeholder="Email" class="p-2 border rounded mb-4 w-full" required>
            <button type="submit" class="bg-blue-600 text-white p-2 rounded w-full">Tambah Tamu</button>
          </form>
          <button id="close-guest-modal" class="bg-red-600 text-white p-2 rounded w-full mt-4">Tutup</button>
        </div>
      </div>
    <script>
        
    // Menampilkan data tamu dari localStorage
    function displayGuests() {
      const guests = JSON.parse(localStorage.getItem('guests') || '[]');
      const guestList = document.getElementById('guest-list');
      guestList.innerHTML = '';

      guests.forEach(guest => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td class="border p-2">${guest.name}</td>
          <td class="border p-2">${guest.id}</td>
          <td class="border p-2">${guest.phone}</td>
          <td class="border p-2">${guest.email}</td>
          <td class="border p-2">
            <button class="bg-blue-600 text-white p-2 rounded" onclick="editGuest(${guest.id})">Edit</button>
            <button class="bg-red-600 text-white p-2 rounded" onclick="deleteGuest(${guest.id})">Delete</button>
          </td>
        `;
        guestList.appendChild(row);
      });

      document.getElementById('total-guests').textContent = guests.length;
    }

    // Menambah tamu
    const addGuestBtn = document.getElementById('add-guest-btn');
    const addGuestModal = document.getElementById('add-guest-modal');
    const closeGuestModal = document.getElementById('close-guest-modal');
    
    addGuestBtn.addEventListener('click', () => {
      addGuestModal.classList.remove('hidden');
    });
    
    closeGuestModal.addEventListener('click', () => {
      addGuestModal.classList.add('hidden');
    });

    document.addEventListener('DOMContentLoaded', () => {
  displayGuests(); // Tampilkan tamu setelah halaman dimuat
});

    const addGuestForm = document.getElementById('add-guest-form');
    addGuestForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const guestName = document.getElementById('guest-name').value;
      const guestId = document.getElementById('guest-id').value;
      const guestPhone = document.getElementById('guest-phone').value;
      const guestEmail = document.getElementById('guest-email').value;

      const guest = {
        id: Date.now(),
        name: guestName,
        phone: guestPhone,
        email: guestEmail,
        idCard: guestId
      };

      const guests = JSON.parse(localStorage.getItem('guests') || '[]');
      guests.push(guest);
      localStorage.setItem('guests', JSON.stringify(guests));
      displayGuests(); // Tampilkan data setelah ditambah
      addGuestModal.classList.add('hidden'); // Close modal after adding
    });

    // Menghapus kamar
    function deleteRoom(id) {
      const rooms = JSON.parse(localStorage.getItem('rooms') || '[]');
      const filteredRooms = rooms.filter(room => room.id !== id);
      localStorage.setItem('rooms', JSON.stringify(filteredRooms));
      displayRooms(); // Tampilkan data setelah dihapus
    }

    // Menghapus tamu
    function deleteGuest(id) {
      const guests = JSON.parse(localStorage.getItem('guests') || '[]');
      const filteredGuests = guests.filter(guest => guest.id !== id);
      localStorage.setItem('guests', JSON.stringify(filteredGuests));
      displayGuests(); // Tampilkan data setelah dihapus
    }
    </script>
    <script src="assets/js/script.js"></script>
    <!-- Main Content -->
</html>
