<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Manajemen Tamu</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </head>
  <body class="bg-gray-100">
    <!-- Navbar -->
    <nav class="bg-blue-600 text-white p-4 shadow">
      <div class="container mx-auto flex justify-between items-center">
        <h1 class="text-xl font-bold">Hotel POS System</h1>
        <ul class="flex space-x-4">
          <li><a href="#" class="hover:underline">Home</a></li>
          <li><a href="#" class="hover:underline">Manajemen Kamar</a></li>
          <li><a href="#" class="hover:underline">Manajemen Tamu</a></li>
        </ul>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto p-6">
      <section>
        <h2 class="text-2xl font-bold mb-4">Manajemen Tamu</h2>
        <div class="mb-4">
          <button
            id="add-guest-btn"
            class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition duration-300"
          >
            Tambah Tamu
          </button>
        </div>
        <div id="guest-cards" class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <!-- Guest cards will be dynamically rendered here -->
        </div>
      </section>
    </main>

    <!-- Modal Tambahkan Tamu -->
    <div
      id="add-guest-modal"
      class="fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center hidden"
    >
      <div class="bg-white p-6 rounded shadow-lg w-full sm:w-1/2">
        <h3 class="text-xl font-bold mb-4">Tambahkan Tamu</h3>
        <form id="add-guest-form">
          <div class="mb-4">
            <label for="guest-name" class="block font-bold">Nama:</label>
            <input
              type="text"
              id="guest-name"
              class="w-full p-2 border rounded"
              required
            />
          </div>
          <div class="mb-4">
            <label for="guest-idCard" class="block font-bold"
              >Nomor Identitas:</label
            >
            <input
              type="text"
              id="guest-idCard"
              class="w-full p-2 border rounded"
              required
            />
          </div>
          <div class="mb-4">
            <label for="guest-phone" class="block font-bold"
              >Nomor Telepon:</label
            >
            <input
              type="text"
              id="guest-phone"
              class="w-full p-2 border rounded"
              required
            />
          </div>
          <div class="mb-4">
            <label for="guest-email" class="block font-bold">Email:</label>
            <input
              type="email"
              id="guest-email"
              class="w-full p-2 border rounded"
              required
            />
          </div>
          <button
            type="submit"
            class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition duration-300"
          >
            Simpan
          </button>
          <button
            type="button"
            id="close-add-guest-modal"
            class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500 transition duration-300"
          >
            Batal
          </button>
        </form>
      </div>
    </div>

    <!-- JavaScript -->
    <script>
      const guests = JSON.parse(localStorage.getItem("guests")) || [];

      // Display Guest Cards
      <!-- Guest Card Rendering Section -->
      function displayGuestCards() {
        const guestCards = document.getElementById("guest-cards");
        guestCards.innerHTML = "";
        guests.forEach((guest, index) => {
          const card = document.createElement("div");
          card.className =
            "bg-white p-4 shadow rounded flex flex-col items-center text-center";
          card.innerHTML = `
      <img src="./assets/image/profile.png" alt="Foto" class="rounded-full mb-4">
      <h4 class="font-bold text-lg">${guest.name}</h4>
      <p class="text-gray-600">${guest.idCard}</p>
      <p class="text-gray-600">${guest.phone}</p>
      <!-- Button Section: Flexbox for alignment -->
      <div class="flex justify-center space-x-2 mt-4">
        <button onclick="viewGuestDetails(${index})" class="bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600">Detail</button>
        <button onclick="editGuest(${index})" class="bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600">Edit</button>
        <button onclick="deleteGuest(${index})" class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600">Hapus</button>
      </div>
    `;
          guestCards.appendChild(card);
        });
      }

      // Add Guest
      document.getElementById("add-guest-btn").addEventListener("click", () => {
        document.getElementById("add-guest-modal").classList.remove("hidden");
      });

      document
        .getElementById("close-add-guest-modal")
        .addEventListener("click", () => {
          document.getElementById("add-guest-modal").classList.add("hidden");
        });

      document
        .getElementById("add-guest-form")
        .addEventListener("submit", (e) => {
          e.preventDefault();
          const name = document.getElementById("guest-name").value;
          const idCard = document.getElementById("guest-idCard").value;
          const phone = document.getElementById("guest-phone").value;
          const email = document.getElementById("guest-email").value;

          guests.push({ name, idCard, phone, email });
          localStorage.setItem("guests", JSON.stringify(guests));
          displayGuestCards();
          document.getElementById("add-guest-modal").classList.add("hidden");
          e.target.reset();
        });

      // View Guest Details
      function viewGuestDetails(index) {
        const guest = guests[index];
        Swal.fire({
          title: `<strong>Detail Tamu</strong>`,
          html: `
          <p><strong>Nama:</strong> ${guest.name}</p>
          <p><strong>Nomor Identitas:</strong> ${guest.idCard}</p>
          <p><strong>Nomor Telepon:</strong> ${guest.phone}</p>
          <p><strong>Email:</strong> ${guest.email}</p>
        `,
          confirmButtonText: "Tutup",
        });
      }

      // Edit Guest
      function editGuest(index) {
        const guest = guests[index];
        Swal.fire({
          title: "Edit Tamu",
          html: `
          <input id="swal-name" class="swal2-input" placeholder="Nama" value="${guest.name}">
          <input id="swal-idCard" class="swal2-input" placeholder="Nomor Identitas" value="${guest.idCard}">
          <input id="swal-phone" class="swal2-input" placeholder="Nomor Telepon" value="${guest.phone}">
          <input id="swal-email" class="swal2-input" placeholder="Email" value="${guest.email}">
        `,
          confirmButtonText: "Simpan",
          preConfirm: () => {
            const name = document.getElementById("swal-name").value;
            const idCard = document.getElementById("swal-idCard").value;
            const phone = document.getElementById("swal-phone").value;
            const email = document.getElementById("swal-email").value;
            guests[index] = { name, idCard, phone, email };
            localStorage.setItem("guests", JSON.stringify(guests));
          },
        }).then(displayGuestCards);
      }

      // Delete Guest
      function deleteGuest(index) {
        Swal.fire({
          title: "Hapus Tamu?",
          text: "Data ini tidak dapat dipulihkan!",
          icon: "warning",
          showCancelButton: true,
          confirmButtonText: "Ya, Hapus!",
          cancelButtonText: "Batal",
        }).then((result) => {
          if (result.isConfirmed) {
            guests.splice(index, 1);
            localStorage.setItem("guests", JSON.stringify(guests));
            displayGuestCards();
          }
        });
      }

      // Initialize
      document.addEventListener("DOMContentLoaded", displayGuestCards);
    </script>
  </body>
</html>
